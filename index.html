<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE CONSTRUCT | English Protocol</title>
    <link rel="stylesheet" href="style_v14.css">

    <!-- RAZORPAY SDK (Critical) -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- FIREBASE SDKs -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- CORE ENGINE -->
    <script defer src="core_v14.js"></script>
</head>

<body>

    <!-- VISUAL TERMINAL -->
    <div id="main-terminal" style="display:none;"> <!-- Hidden by default, unlocked by JS -->
        <header>
            <h1>Don't Worry.</h1>
            <div style="font-size: 0.8rem; color: #008F11; margin-top: 1rem; line-height: 1.5;">
                You have come to the right place.<br>
                Come daily. Thank me later.
            </div>
        </header>

        <div class="status-bar">
            <span>STATUS: ONLINE</span>
            <span>UPLINK: SECURE</span>
            <span id="date-display">...</span>
        </div>

        <!-- THE FEED (Populated by Firebase) -->
        <div id="feed-container">
            <div style="text-align: center; margin-top: 5rem; color: #008F11;">
                [ WAITING FOR SIGNAL INPUT... ]<br><br>
                <span class="cursor-blink">_</span>
            </div>
        </div>
    </div>

    <!-- PAYWALL OVERLAY -->
    <div id="paywall-overlay"
        style="display:flex; position:fixed; inset:0; background:#000; z-index:50; flex-direction:column; align-items:center; justify-content:center; text-align:center;">
        <h1 style="color:#00FF41; margin-bottom:1rem; text-shadow:0 0 20px #00FF41;">ACCESS RESTRICTED</h1>
        <p style="color:#008F11; max-width:300px; margin-bottom:2rem; line-height:1.6;">
            This node contains restricted linguistic data.
            <br>Clearance required for neural upload.
        </p>

        <button class="btn" onclick="startPayment()" style="margin-bottom:2rem;">ACQUIRE LICENSE [â‚¹99]</button>

        <div style="margin-top:2rem;">
            <p style="font-size:0.7rem; color:#005500; cursor:pointer;"
                onclick="document.getElementById('master-input-area').style.display='block'">> ALREADY HAVE A KEY?</p>
            <div id="master-input-area" style="display:none; margin-top:1rem;">
                <input type="password" id="master-key-input" class="admin-input" placeholder="ENTER ACCESS HASH"
                    style="width:200px; text-align:center;">
                <br>
                <button class="btn" style="padding:0.5rem 1rem; font-size:0.7rem;"
                    onclick="verifyMasterKey()">AUTHENTICATE</button>
            </div>
        </div>
    </div>

    <!-- SECRET ADMIN TERMINAL (Hidden by Default) -->
    <!-- Revealed by pressing CTRL + M -->
    <div id="admin-terminal">
        <div class="close-btn" onclick="toggleAdmin()">[X] TERMINATE</div>
        <h2
            style="margin-bottom: 2rem; color: #fff; background: #00FF41; color: #000; padding: 0.5rem; display: inline-block;">
            ADMIN OVERRIDE</h2>

        <select id="post-category" class="admin-input" style="margin-bottom: 0.5rem;">
            <option value="VOCABULARY">VOCABULARY</option>
            <option value="GRAMMAR">GRAMMAR</option>
            <option value="MINDSET">MINDSET</option>
        </select>

        <input type="text" id="post-title" class="admin-input" placeholder="TITLE (e.g. TIP #1)"
            style="margin-bottom: 0.5rem;">

        <textarea id="post-content" class="admin-input" style="height: 150px;"
            placeholder="ENTER RAW DATA..."></textarea>

        <button class="btn" onclick="uploadData()"><span id="upload-btn-text">UPLOAD TO MAINFRAME</span></button>
        <div id="upload-status" style="margin-top: 1rem; font-size: 0.8rem;"></div>
    </div>

    <script>
        // VISUAL CLOCK
        setInterval(() => {
            const now = new Date();
            document.getElementById('date-display').innerText = now.toISOString().split('T')[0] + " // " + now.toLocaleTimeString();
        }, 1000);

        // ADMIN HOTKEY LISTENER
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'm') {
                toggleAdmin();
            }
        });

        function toggleAdmin() {
            const panel = document.getElementById('admin-terminal');
            if (panel.style.display === 'block') {
                panel.style.display = 'none';
            } else {
                const pass = prompt("AUTHENTICATION REQUIRED:");
                if (pass === "neo") { // Simple Password
                    panel.style.display = 'block';
                } else {
                    alert("ACCESS DENIED.");
                }
            }
        }
    </script>
</body>

</html>